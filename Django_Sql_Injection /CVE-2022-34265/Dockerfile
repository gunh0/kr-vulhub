FROM python:3.8.13-slim-buster

RUN sed -i "s@http://deb.debian.org@https://mirrors.tuna.tsinghua.edu.cn@g" /etc/apt/sources.list

# 필요한 패키지 및 의존성 설치
RUN apt-get update && apt-get install -y \
    pkg-config \
    libmariadb-dev-compat \
    build-essential

# Python 패키지 설치
RUN pip3 install django==4.0.5 mysqlclient -i https://pypi.tuna.tsinghua.edu.cn/simple/

WORKDIR /app
ADD . /app

RUN python manage.py makemigrations

CMD ["python", "manage.py", "runserver", "0.0.0.0:8000"]
