# CVE-2021-29441
**Contributors**

-   [이진(@xorverbin)](https://github.com/xorverbin)


<br/>

### 요약

-   Nacos 는 클라우드 네이티브 애플리케이션 구축을 쉽게 만들어주는 관리 플랫폼 서비스
-   해당 취약점은 인증 및 권한 부여 작업을 수행할 때 사용자 에이전트가 'Nacos-Server' 인지 여부를 판단할 때 발생
-   'Nacos-Server' 인 경우 인증을 수행하지 않음
-   원래는 서버간의 요청을 처리하기 위함이었지만, 구성이 너무 간단해 사용자에이전트가 코드에 직접 하드코딩되어있어 취약점 발생

<br/>

### 환경 구성 및 실행

-   `docker compose up -d`를 실행하여 테스트 환경을 실행함.
-   실행이 안될경우 `docker compose reatrt nacos` 로 재실행
-   `python poc.py http://target:8848` 로 poc 코드 실행 


<br/>

### 결과

-  ![image](https://github.com/xorverbin/whitehat-school-vulhub/assets/145239266/ceb56645-98ba-413a-844b-e514bd952fd9)


<br/>

### 정리

-   해당 취약점을 바탕으로 사용자를 추가하여 공격자는 사용자 이름, 암호와 같은 민감한 정보 획득 가능. 해당 취약점을 완화 하기 위해서는  'Nacos-Server' 에서 들어오는 요청에 대한 새로운 인증 절차가 필요하다. 


### 참조 
-  https://github.com/vulhub/vulhub/tree/master/nacos
