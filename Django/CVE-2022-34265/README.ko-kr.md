# **Django Trunc(kind) 및 Extract(lookup_name) SQL 인젝션 취약점 (CVE-2022-34265)**

  

Django는 빠른 개발과 깔끔하고 실용적인 설계를 장려하는 고급 Python 웹 프레임워크입니다.

  

2022년 7월 4일, Django는 Trunc() 및 Extract() 데이터베이스 함수에서 발생하는 **SQL 인젝션 취약점**을 수정하는 보안 업데이트를 발표했습니다. 이 취약점은 **Django 4.0.6 미만**, **3.2.14 미만 버전**에 영향을 줍니다.

  

참고 자료:

- [Django 공식 보안 공지](https://www.djangoproject.com/weblog/2022/jul/04/security-releases/)
    
- [취약점 수정 커밋](https://github.com/django/django/commit/0dc9c016fadb71a067e5a42be30164e3f96c0492)
    

  

## **환경 구성**

  

다음 명령어를 실행하여 취약한 Django 4.0.5 서버를 시작합니다:

```
docker compose up -d
```

서버가 시작된 후 http://your-ip:8000 주소로 웹 페이지에 접속할 수 있습니다.

  

## **취약점 재현**

  

웹 애플리케이션은 Trunc 함수를 사용하여 페이지 클릭 수를 날짜별로 집계합니다.

http://your-ip:8000/?date=minute에 접속하면 분 단위 클릭 수를 확인할 수 있습니다:

![](1.png)


SQL 인젝션을 유발하려면 date 파라미터에 악의적인 입력을 추가합니다:

```
http://your-ip:8000/?date=xxxx'xxxx
```

SQL 오류 메시지가 표시되면 인젝션 성공을 확인할 수 있습니다:

![](2.png)
