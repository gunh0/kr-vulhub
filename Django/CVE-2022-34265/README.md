# CVE-2022-34265 / Django Trunc SQL Injection

> 화이트햇 스쿨 3기 (19반) - [김민곤(@KMINGON)](https://github.com/KMINGON)



### 환경 구성
---
취약한 Django 4.0.5 서버 실행
```bash
git clone https://github.com/KMINGON/kr-vulhub.git
cd Django/CVE-2022-34265
docker compose up -d
```



### 정상 요청
---
- `http://localhost:8000/?date=minute` 요청 시 페이지 클릭 수가 분 단위로 출력됨
- 응답 JSON
```json
[
  {
    "time": "2025-04-14T04:00:00",
    "count": 1
  },
  {
    "time": "2025-04-14T03:59:00",
    "count": 3
  },
  {
    "time": "2025-04-14T03:58:00",
    "count": 5
  }
]
```
![image](./normal.png)
### 취약 요청
---
- `http://localhost:8000/?date=xxx'xxxx` 요청 시 SQL 오류 발생

- 오류 메시지
-> SELECT DATE_TRUNC('xxx'xxxx', "vuln_weblog"."created_time")
![image](./sqli-error.png)