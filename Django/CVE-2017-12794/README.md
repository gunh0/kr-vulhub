# Django 500 Debug Page Cross-Site Scripting (XSS)

í™”ì´íŠ¸í–‡ ìŠ¤ì¿¨ 3ê¸° ê¹€ë¯¼ê·œ

DjangoëŠ” ë¹ ë¥¸ ê°œë°œê³¼ ê¹”ë”í•˜ê³  ì‹¤ìš©ì ì¸ ë””ìì¸ì„ ì¥ë ¤í•˜ëŠ” ê³ ìˆ˜ì¤€ Python ì›¹ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.

Django 1.11.5 ë° 1.10.8 ì´ì „ ë²„ì „ì—ì„œ Debug Error Pageì— ì˜¤ë¥˜ ë©”ì‹œì§€ì— ì‚¬ìš©ìì˜ ì…ë ¥ì„ escape ì²˜ë¦¬í•˜ì§€ ì•Šì•„ XSS(Cross-Site Scripting)ì´ ë°œìƒí•©ë‹ˆë‹¤.

## 1. ì·¨ì•½í•œ í™˜ê²½ êµ¬ì„±

ì·¨ì•½í•œ í™˜ê²½ì„ êµ¬ì„±í•˜ê¸° ìœ„í•´ vulhubì—ì„œ git cloneìœ¼ë¡œ í™˜ê²½ì„ ë°›ì•„ì™€ ì¤ë‹ˆë‹¤.

### 1) git clone vulhub.git

```bash
git clone https://github.com/vulhub/vulhub.git
```

`/vulhub` ë””ë ‰í„°ë¦¬ ì•ˆì—ëŠ” ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ì·¨ì•½í•œ í™˜ê²½ ëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![vulhub ëª©ë¡ ì˜ˆì‹œ](https://github.com/minnggyuu/kr-vulhub/blob/main/Django/CVE-2017-12794/img/image1.png)

### 2) docker-compose up -d
![docker-compose íŒŒì¼](https://github.com/minnggyuu/kr-vulhub/blob/main/Django/CVE-2017-12794/img/image2.png)
docker-compose.yml íŒŒì¼ì„ ì‚¬ìš©í•˜ë©´ ë¹Œë“œ, ì‹¤í–‰, ì—°ê²°ì„ í•˜ë‚˜ì˜ íŒŒì¼ë¡œ ë™ì‹œì— ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
docker-compose up -d
```

![docker-compose ì‹¤í–‰ ì˜ˆì‹œ](https://github.com/minnggyuu/kr-vulhub/blob/main/Django/CVE-2017-12794/img/image3.png)

## 2. í™˜ê²½ ì ‘ì† & ìµìŠ¤í”Œë¡œì‡

![í™˜ê²½ ì ‘ì† ì˜ˆì‹œ](https://github.com/minnggyuu/kr-vulhub/blob/main/Django/CVE-2017-12794/img/image4.png)

êµ¬ì¶•í•œ í™˜ê²½ì€ `/create_user` ì—”ë“œí¬ì¸íŠ¸ì—ì„œ `username`ì´ë¼ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ ë°›ìŠµë‹ˆë‹¤.

1ì„ ì¸ìë¡œ ë³´ë‚´ë³´ë‹ˆ, userê°€ ë§Œë“¤ì–´ì¡Œë‹¤ëŠ” ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

![user ìƒì„± ì„±ê³µ](https://github.com/minnggyuu/kr-vulhub/blob/main/Django/CVE-2017-12794/img/image5.png)

ê°™ì€ ìš”ì²­ì„ ë°˜ë³µí•˜ë‹ˆ `Key(username) = (1)` ì´ ì´ë¯¸ ì¡´ì¬í•œë‹¤ëŠ” ì´ìœ ë¡œ 500 ì—ëŸ¬ë¥¼ ë°˜í™˜í•œ ëª¨ìŠµì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.

ê°™ì€ ë°©ì‹ìœ¼ë¡œ `1` ëŒ€ì‹  `<script>` êµ¬ë¬¸ì„ ì‚½ì…í•´ ë³´ê² ìŠµë‹ˆë‹¤.

![ìŠ¤í¬ë¦½íŠ¸ ì‚½ì… ì‹œë„](https://github.com/minnggyuu/kr-vulhub/blob/main/Django/CVE-2017-12794/img/image6.png)

![ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ í™•ì¸](https://github.com/minnggyuu/kr-vulhub/blob/main/Django/CVE-2017-12794/img/image7.png)

ê°œë°œì ë„êµ¬ì˜ HTML Elementsë¥¼ í™•ì¸í•´ ë³´ë©´, ì—ëŸ¬ ìƒì„¸ ë©”ì‹œì§€ì— `<script>` êµ¬ë¬¸ì´ ì‚½ì…ë˜ë©´ì„œ ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ“ ê³µê²© ì‹œë‚˜ë¦¬ì˜¤

### ì„œë²„ì—ì„œ XSSê°€ ê°€ëŠ¥í•œ í™˜ê²½

- Stored XSS ê³µê²© ê°€ëŠ¥
- ì›¹ ì‚¬ì´íŠ¸ ë‚´ ê²Œì‹œê¸€ì´ë‚˜ ëŒ“ê¸€ì— ìŠ¤í¬ë¦½íŠ¸ ì‚½ì…
- ì‚¬ìš©ìì˜ ì¿ í‚¤ íƒˆì·¨ ê°€ëŠ¥

### ì„œë²„ì—ì„œ XSSê°€ ë¶ˆê°€ëŠ¥í•œ í™˜ê²½

- Reflected XSS ê³µê²© ê°€ëŠ¥
- ì‚¬ìš©ìì—ê²Œ ê³µê²© í˜ì´ë¡œë“œê°€ í¬í•¨ëœ URLì„ ì „ì†¡
- í´ë¦­ì„ ìœ ë„í•˜ì—¬ ì¿ í‚¤ íƒˆì·¨ ê°€ëŠ¥

## 3. íŒ¨ì¹˜

![íŒ¨ì¹˜ ì„¤ëª… ì´ë¯¸ì§€](https://github.com/minnggyuu/kr-vulhub/blob/main/Django/CVE-2017-12794/img/image8.png)

ì·¨ì•½ì  ë°œê²¬ ì´í›„, Djangoì—ì„œ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì´ìŠ¤ì¼€ì´í”„ ì²˜ë¦¬í•œ ë’¤ ì¶œë ¥í•˜ë„ë¡ ë³€ê²½í•˜ì—¬ íŒ¨ì¹˜í–ˆìŠµë‹ˆë‹¤.

