from django.shortcuts import render
from django.http import JsonResponse
from .models import TestModel

def vuln_view(request):
    sort = request.GET.get('sort', 'id')  # 기본값 'id'
    try:
        objs = TestModel.objects.all().order_by(sort)
        data = [{"id": obj.id, "title": obj.title} for obj in objs]
        return JsonResponse({"result": data})
    except Exception as e:
        return JsonResponse({"error": str(e)}, status=500)
