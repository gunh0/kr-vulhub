FROM ubuntu:14.04

# 필요한 패키지 설치
RUN apt-get update && \
    apt-get install -y apache2 apache2-utils bash && \
    apt-get clean

# CGI 활성화
RUN a2enmod cgi

# cgi-bin 디렉토리 생성
RUN mkdir -p /usr/lib/cgi-bin

# CGI 스크립트를 복사
COPY cgi-bin/ /usr/lib/cgi-bin/
RUN chmod +x /usr/lib/cgi-bin/*

# Apache 환경 설정 수정
RUN sed -i 's/ScriptAlias \/cgi-bin\//ScriptAlias \/cgi-bin\//g' /etc/apache2/sites-enabled/000-default.conf

# 80포트 오픈
EXPOSE 80

# Apache 서버 실행
CMD ["/usr/sbin/apache2ctl", "-D", "FOREGROUND"]

