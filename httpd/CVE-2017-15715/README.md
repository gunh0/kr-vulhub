# Apache HTTPD 개행 구문 분석 취약점(CVE-2017-15715)

Apache HTTPD는 mod_php를 통해 PHP 웹 페이지를 실행할 수 있는 HTTP 서버입니다. 2.4.0~2.4.29 버전에는 파싱 취약점이 있으며, PHP 파싱 시 '1.php\x0A'가 PHP 접미사에 따라 파싱되어 일부 서버의 보안 정책을 우회하게 됩니다.

## 취약점 환경

취약성 환경을 컴파일하고 실행합니다.

```
docker compose build
docker compose up -d
```

시작된 후 Apache 서버는 `http://your-ip:8080`에서 실행됩니다.

## 취약점 재현

1.php라는 파일 업로드가 차단되었습니다.

![](1.png)

1.php 뒤에 `\x0A`를 삽입하고(`\x0D\x0A`는 될 수 없으며 `\x0A`만 가능함) 더 이상 가로채지 않습니다.

![](2.png)

방금 업로드한 `/1.php%0a`에 액세스하여 성공적으로 구문 분석할 수 있음을 확인했지만 이 파일에는 PHP 접미사가 없습니다. 이는 대상에 구문 분석 취약점이 있음을 나타냅니다.

![](3.png)