# 이미지의 기반 이미지를 지정
FROM vulhub/node:9.0.0

# 이미지를 관리하는 사람 또는 그룹을 나타내는 라벨을 설정
LABEL maintainer="phithon <root@leavesongs.com>"

# 호스트의 파일을 컨테이너 내부로 복사
COPY package.json package-lock.json /usr/src/

# 원격 URL에서 파일을 다운로드하여 컨테이너 내부로 복사
ADD https://raw.githubusercontent.com/vishnubob/wait-for-it/master/wait-for-it.sh /usr/local/bin/wait-for-it.sh

# 이미지 빌드 시 실행
RUN set -ex \
    && cd /usr/src/ \
    && npm install \
    && chmod +x /usr/local/bin/wait-for-it.sh

# 컨테이너 내에서 명령을 실행할 때의 작업 디렉토리를 설정
WORKDIR /usr/src

# 컨테이너가 시작될 때 실행할 명령을 지정
CMD [ "npm", "run", "start" ]