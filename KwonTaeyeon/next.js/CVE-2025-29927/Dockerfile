# Node.js 기반 Next.js 15.2.2 애플리케이션용 Dockerfile
FROM node:20

WORKDIR /app

# Next.js 15.2.2 설치
RUN npx create-next-app@15.2.2 vulnerable-app -y \
  && cd vulnerable-app \
  && npm install

WORKDIR /app/vulnerable-app

# 미들웨어 추가 (취약한 인증 처리)
COPY middleware.js ./middleware.js
COPY next.config.js ./next.config.js

# 포트 오픈
EXPOSE 3000

CMD ["npm", "run", "dev"]
